import{r as c,u as z,g as _,j as e,c as $,a as n,T as B,U as P,F as w,Q as q,C as j,y as G,z as H,R as Q,S as W,E as J,V as K,W as X}from"./index.a2654dfd.js";/* empty css                    */import{U as Y}from"./UpdatedUserMsg.e079a9a0.js";import{M as x}from"./Modal.e6fddb49.js";import{F as C}from"./DeleteMsg.0b3d060c.js";import{I as O}from"./InputGroup.3a294cd1.js";import Z from"./SignIn.3133c1b1.js";const ee=c.exports.forwardRef(({bsPrefix:s,className:r,striped:m,bordered:d,borderless:i,hover:o,size:u,variant:t,responsive:h,...f},S)=>{const a=z(s,"table"),k=_(r,a,t&&`${a}-${t}`,u&&`${a}-${u}`,m&&`${a}-${typeof m=="string"?`striped-${m}`:"striped"}`,d&&`${a}-bordered`,i&&`${a}-borderless`,o&&`${a}-hover`),y=e("table",{...f,className:k,ref:S});if(h){let g=`${a}-responsive`;return typeof h=="string"&&(g=`${g}-${h}`),e("div",{className:g,children:y})}return y}),te=ee;function se(s){const[r,m]=c.exports.useState(""),[d,i]=c.exports.useState(""),[o,u]=c.exports.useState(void 0);return e($,{children:n("div",{className:"search-users-container",children:[e("input",{className:"search-text me-2",type:"text",placeholder:"Search",value:r,onChange:t=>{m(t.target.value),s.onChange(t.target.value,d,o)}}),n("select",{className:"search-select me-2",name:"search-by",value:d,onChange:t=>{i(t.target.value),s.onChange(r,t.target.value,o)},children:[e("option",{children:"Search by..."}),e("option",{children:"Email"}),e("option",{children:"First name"}),e("option",{children:"Last name"})]}),n("select",{className:"search-select",name:"user-type",value:o,onChange:t=>{u(t.target.value),s.onChange(r,d,t.target.value)},children:[e("option",{children:"User type..."}),e("option",{children:"User"}),e("option",{children:"Business"})]})]})})}function ae({users:s}){const[r,m]=c.exports.useState(!1),{theme:d}=c.exports.useContext(B),{token:i}=c.exports.useContext(P),o=()=>m(!1),u=()=>m(!0),[t,h]=c.exports.useState({}),[f,S]=c.exports.useState(s==null?void 0:s._id),[a,k]=c.exports.useState({email:s==null?void 0:s.email,firstName:s==null?void 0:s.firstName,lastName:s==null?void 0:s.lastName,isBusinessAccount:s==null?void 0:s.isBusinessAccount}),[y,g]=c.exports.useState(!1),l=()=>{g(!1)},b=()=>{g(!0),setTimeout(l,3e3)};function v(N){const{name:p,value:L,type:A,checked:E}=N.target;k({...a,[p]:A==="checkbox"?E:L})}function T(){return!(a.email.length<6||!a.email.includes("@")||!a.email.includes("."))}function M(){return!(a.firstName.length<2||a.firstName.match(/\d/)!==null)}function R(){return!(a.lastName.length<2||a.lastName.match(/\d/)!==null)}function V(N){N.preventDefault();try{const{email:p,firstName:L,lastName:A,isBusinessAccount:E}=a;Q({email:p,firstName:L,lastName:A,isBusinessAccount:E},i,f);const F=[];T()||F.push("Email is invalid");const D=[];M()||D.push("Please enter a valid name");const I=[];R()||I.push("Please enter a valid name");const U={};if(F.length>0&&(U.email=F),D.length>0&&(U.firstName=D),I.length>0&&(U.lastName=I),Object.keys(U).length>0)throw h(U),console.log(U),new Error;b()}catch(p){return console.log(p)}}return n($,{children:[e("button",{className:`buttons-${d} button-control-small`,onClick:u,children:e(w,{icon:q})}),e(x,{show:r,onHide:o,backdrop:"static",keyboard:!1,centered:!0,children:n(x.Body,{className:`components-${d} update-acc-container`,children:[e(x.Title,{className:"form-title mb-2",children:"Update account"}),e(j,{className:"form-close-x","aria-label":"Hide",onClick:o}),a.isBusinessAccount?e("div",{className:"update-profile-img",children:e(w,{icon:H,className:"fa-5x"})}):e("div",{className:"update-profile-img",children:e(w,{icon:G,className:"fa-5x"})}),n(C,{className:"update-acc-inputs-group",onSubmit:V,children:[n(C.Group,{className:"update-acc-inputs mb-3",children:[e(O,{hasValidation:!0,children:e(C.Control,{type:"email",name:"email",size:"lg",placeholder:"Email address",value:a.email,onChange:v})}),t.email&&t.email.map((N,p)=>e("div",{className:"error text-danger",children:N},p))]}),n("div",{className:"update-acc-inputs update-user-name mb-3",children:[n(C.Group,{className:"update-user-fist-name me-2",children:[e(O,{hasValidation:!0,children:e(C.Control,{type:"text",name:"firstName",size:"lg",placeholder:"First name",value:a.firstName,onChange:v})}),t.firstName&&t.firstName.map((N,p)=>e("div",{className:"error text-danger",children:N},p))]}),n(C.Group,{className:"update-user-last-name",children:[e(O,{hasValidation:!0,children:e(C.Control,{type:"text",name:"lastName",size:"lg",placeholder:"Last name",value:a.lastName,onChange:v})}),t.lastName&&t.lastName.map((N,p)=>e("div",{className:"error text-danger",children:N},p))]})]}),e(C.Group,{className:"update-checkbox d-flex justify-content-center mb-4",children:e(C.Check,{label:"Business Account",type:"checkbox",name:"isBusinessAccount",value:a.isBusinessAccount,defaultChecked:a.isBusinessAccount,onChange:v})}),n("div",{className:"update-acc-btn",children:[e("button",{type:"reset",onClick:o,className:`buttons-${d} button-control me-3`,children:"Close"}),e("button",{type:"submit",className:`buttons-${d} button-control`,children:"Update"})]})]})]})}),e(Y,{showConfirm:y,handleCloseConfirm:l})]})}function ne({id:s,user:r,onDelete:m}){const[d,i]=c.exports.useState(!1),[o,u]=c.exports.useState(!1),{theme:t}=c.exports.useContext(B),h=()=>i(!1),f=()=>i(!0),S=()=>{m(r==null?void 0:r._id),u(!1)},a=()=>{u(!0),h(),setTimeout(S,3e3)};return n($,{children:[e("button",{className:`buttons-${t} button-control-small`,onClick:f,children:e(w,{icon:W})}),e(x,{show:d,onHide:h,children:e(x.Body,{className:`msg-container components-${t} `,children:n("div",{className:"msg-grid",children:[e(x.Title,{className:"msg-title",children:"Delete this user?"}),e(j,{className:"msg-close-x","aria-label":"Hide",onClick:h}),n("div",{className:"msg-user-info",children:[n("div",{className:"user-name",children:["Id: ",s+1]}),n("div",{className:"user-name",children:["Email: ",r==null?void 0:r.email]}),n("div",{className:"user-name",children:["Name: ",r==null?void 0:r.firstName," ",r==null?void 0:r.lastName]})]}),n("div",{className:"msg-options ",children:[e("button",{className:`buttons-${t} button-control-close `,onClick:h,children:"Close"}),e("button",{className:`buttons-${t} button-control`,onClick:a,children:"Delete"})]})]})})}),e(x,{show:o,onHide:S,children:e(x.Body,{className:`msg-container components-${t} `,children:e(x.Title,{className:"msg-title",children:"User has been deleted successfully"})})})]})}function oe({users:s,onDelete:r}){const{theme:m}=c.exports.useContext(B);if(!s)return e("div",{children:"No users"});let d=s.map((i,o)=>(i.isAdminAccount&&s.splice(o,1),n("tr",{children:[e("td",{children:o+1}),e("td",{children:i.firstName}),e("td",{children:i.lastName}),e("td",{children:i.email}),i.isBusinessAccount?n("td",{children:["Business"," ",e(w,{icon:H,className:"fa-2x"})]}):n("td",{children:["User"," ",e(w,{icon:G,className:"fa-2x"})]}),e("td",{children:e(ne,{user:i,id:o,onDelete:r})}),e("td",{children:e(ae,{users:i})})]},o)));return n($,{children:[n("p",{children:["Users: ",`(${s.length})`]}),n(te,{className:"text-center",striped:!0,bordered:!0,hover:!0,variant:m==="light"?"":"dark",children:[e("thead",{className:"list-title",children:n("tr",{children:[e("td",{children:"ID"}),e("td",{children:"First Name"}),e("td",{children:"Last Name"}),e("td",{children:"Email"}),e("td",{children:"User Type"}),e("td",{children:"Delete"}),e("td",{children:"Edit"})]})}),e("tbody",{children:d})]})]})}function ue(){const{theme:s}=c.exports.useContext(B),{token:r}=c.exports.useContext(P),{user:m}=c.exports.useContext(J),[d,i]=c.exports.useState([]),[o,u]=c.exports.useState(""),[t,h]=c.exports.useState(""),[f,S]=c.exports.useState("");c.exports.useEffect(()=>{y()},[]);function a(l,b,v){u(l),h(b),S(v)}function k(l){X(l).then(b=>{y()}).catch(b=>alert(b.message))}function y(){K().then(l=>{console.log(l),i([...l])}).catch(l=>alert(l.message))}const g=c.exports.useMemo(()=>d.filter(l=>{const b=f==="User type..."||l.isBusinessAccount&&f==="Business"||!l.isBusinessAccount&&f==="User"||!f,v=t==="Search by..."||l.email.toLowerCase().indexOf(o.toLowerCase())>-1&&t==="Email"||l.firstName.toLowerCase().indexOf(o.toLowerCase())>-1&&t==="First name"||l.lastName.toLowerCase().indexOf(o.toLowerCase())>-1&&t==="Last name"||!t,T=!o||l.email.toLowerCase().indexOf(o.toLowerCase())>-1||l.firstName.toLowerCase().indexOf(o.toLowerCase())>-1||l.lastName.toLowerCase().indexOf(o.toLowerCase())>-1;return b&&T&&v}),[d,o,f,t]);return e($,{children:!r&&!m&&!m.isAdminAccount?e(Z,{}):e($,{children:e("div",{className:`page-container body-${s} h-100`,children:n("div",{className:"page-content-container my-4",children:[e("h1",{className:"m-0",children:"Users List"}),n("section",{children:[e(se,{onChange:a}),e(oe,{users:g,onDelete:k})]})]})})})})}export{ue as default};
